<!DOCTYPE html>
<html lang="de">
<head>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = "https://zhfmstklaclsesndnamm.supabase.co";
  const SUPABASE_ANON_KEY = "sb_publishable_y-qvrQF5rl60FkBWo5ongg_2VbBS1qO";
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  (async () => {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) window.location.href = "login.html";
  })();
</script>
<!-- Supabase SDK einbinden -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<!-- Dein JS mit API-Funktionen -->
<script src="script.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>3PT Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <button onclick="logout()">Logout</button>
<script>
async function logout() {
  await supabase.auth.signOut();
  window.location.href = "login.html";
}
</script>
  <div class="container">
    <header>
      <h1>3PT Tracker</h1>
      <div class="top-controls">
        <div class="date-controls">
          <button id="prevDayBtn" title="Vorheriger Tag">â—€</button>
          <input type="date" id="datePicker" />
          <button id="nextDayBtn" title="NÃ¤chster Tag">â–¶</button>
        </div>
        <div class="action-controls">
          <button id="undoBtn" title="Undo letzte Ã„nderung">Undo</button>
          <button id="exportCsvBtn" title="CSV Export">Export CSV</button>
          <button id="deleteDayBtn" title="Tag lÃ¶schen">Tag lÃ¶schen</button>
        </div>
      </div>
    </header>

    <main>
      <section class="session-area">
        <div class="session-controls">
          <label for="sessionSelect">Session</label>
          <select id="sessionSelect"></select>
          <button id="newSessionBtn">Neue Session</button>
          <button id="renameSessionBtn" title="Umbenennen">âœŽ</button>
          <button id="deleteSessionBtn" title="Session lÃ¶schen">ðŸ—‘</button>
        </div>

        <div class="stats">
          <div id="sessionStats" class="stat-line"></div>
          <div id="dayStats" class="stat-line"></div>
          <div id="totalStats" class="stat-line"></div>
          <div id="rollingAvg" class="stat-line small"></div>
        </div>

        <div class="hit-miss">
          <button id="hitBtn" class="hit">Treffer</button>
          <button id="missBtn" class="miss">Daneben</button>
        </div>

        <div class="session-notes">
          <label for="notes">Notiz (Session):</label>
          <input id="notes" placeholder="z. B. Halle, mÃ¼de, Wind..." />
          <button id="saveNotesBtn">Speichern</button>
        </div>
      </section>

      <section class="charts">
        <h3>Session Verlauf (aktuelle Session)</h3>
        <div class="chart-wrap"><canvas id="sessionChart"></canvas></div>

        <h3>Tages Verlauf (alle Tage)</h3>
        <div class="chart-wrap"><canvas id="dayChart"></canvas></div>
      </section>

      <aside class="past-days">
        <h3>Vergangene Tage</h3>
        <div id="pastDaysList" class="past-list"></div>
      </aside>
    </main>

   
  </div>

  <script src="script.js"></script>
</body>
</html>
